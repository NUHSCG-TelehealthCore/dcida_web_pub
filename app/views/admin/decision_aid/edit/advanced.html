<div class="space-top space-bottom text-center" ng-show="ctrl.loading">
  <i class="fa fa-2x fa-spin fa-refresh"></i>
</div>
<div ng-show="!ctrl.loading">
  <div class="space-bottom clearfix">
    <div class="pull-right">
      <span class="text-success flashing-success" ng-if="ctrl.saveSuccess">Saved! <i class="fa fa-lg fa-check-circle"></i></span>
      <button class="btn btn-info" ng-disabled="!decisionAidEditForm.$dirty" ng-click="ctrl.save()">Save</button>
    </div>
    <h2>Advanced</h2>
  </div>
  <form name="decisionAidEditForm" ng-show="ctrl.decisionAid">
    <div sd-error-scroll sa-errors="ctrl.errors"></div>
    <h4>Redcap Parameters</h4>
    <div class="form-group">
      <label>REDCap API URL</label>
      <sd-information>This should be the URL that is used to access the REDCap API (e.g. https://www.dcida2.cheos.ubc.ca/redcap/api)</sd-information>
      <input class="form-control" ng-model="ctrl.decisionAidEdit.redcap_url" />
    </div>
    <div class="form-group">
      <label>REDCap API Token</label>
      <sd-information>This is the API token that is generated by REDCap. The user that the token is generated for must have the correct permissions to access the REDCap data export features.</sd-information>
      <input class="form-control" ng-model="ctrl.decisionAidEdit.redcap_token" />
    </div>
    <button class="btn btn-default space-bottom" ng-click="ctrl.testRedcapConnection()"><i class="fa fa-lg" ng-class="{'fa-check-circle-o text-success': ctrl.redcapConnectionSuccess === 1, 'fa-question-circle text-warning': ctrl.redcapConnectionSuccess === 2, 'fa-times-circle-o text-danger': ctrl.redcapConnectionSuccess === 3, 'fa-refresh fa-spin': ctrl.redcapConnectionSuccess === 4}"></i> Test Connection</button>
    <div class="form-group">
      <label>Unique REDCap Record Identifier</label>
      <sd-information>This is the variable name that is used to identify REDCap records. If no value is set, the default is "record_id"</sd-information>
      <input class="form-control" ng-model="ctrl.decisionAidEdit.unique_redcap_record_identifier" />
    </div>
    <h4>MySQL Parameters</h4>
    <div class="form-group">
      <label>MySQL Database Name</label>
      <sd-information>This should be the name of the MySQL database that you would like to import data from.</sd-information>
      <input class="form-control" ng-model="ctrl.decisionAidEdit.mysql_dbname" />
    </div>
    <div class="form-group">
      <label>MySQL Username</label>
      <sd-information>This is the username of the MySQL user who can access the database.</sd-information>
      <input class="form-control" ng-model="ctrl.decisionAidEdit.mysql_user" />
    </div>
    <div class="form-group">
      <label>MySQL Password</label>
      <sd-information>This is the password of the MySQL user who can access the database.</sd-information>
      <input class="form-control" ng-model="ctrl.decisionAidEdit.mysql_password" />
    </div>

    <h4>Custom Styles</h4>
    <div class="form-group">
      <label>CSS</label>
      <sd-information>Add your customized CSS for this decision aid here</sd-information>
      <textarea rows="10" class="form-control" ng-model="ctrl.decisionAidEdit.custom_css"></textarea>
    </div>
  </form>
</div>